<html>

<head>
    <script src="main.js"></script>
    <style>
        body {
            font-family: sans-serif;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            margin: auto;
            max-width: 960px;
            padding: 50px;
        }

        ul {
            list-style: none;
            display: flex;
            justify-content: start;
            padding: 0px;
            border-bottom: 1px solid #f3f3f3;
            flex-wrap: wrap;
            margin-bottom: 60px;
        }

        li {
            background-color: #fbfbfb;
            padding: 10px 30px;
            border-radius: 25px;
            border: 1px solid #f4f4f4;
            margin: 15px 15px;
            width: max-content;
            cursor: pointer;
            font-size: 12px;
        }

        li.green.selected {
            color: white;
            background-color: green;
        }

        li.red.selected {
            color: white;
            background-color: red;
        }

        span {
            font-weight: bold;
            padding: 10px 30px 10px 10px;
            color: #353e6e;
            display: block;
        }

        span:focus-visible {
            outline: #f4f4f4 solid 1px;
            border-radius: 10px;
            color: #b0b0b0;
        }

        .percentageWrapper {
            width: 100px;
            height: 100px;
            position: fixed;
            top: 0;
            margin: 25px;
            border-radius: 50%;
            background: radial-gradient(white 50%, transparent 51%), conic-gradient(red 0deg, red 0deg, rgb(186, 186, 186) 0deg, rgb(186, 186, 186) 360deg, rgb(76, 175, 80) 360deg, rgb(76, 175, 80) 360deg);
        }

        input[type="button"] {
            padding: 16px 32px;
            background-color: #2196f3;
            border: none;
            color: white;
            border-radius: 7px;
            top: 120px;
            position: relative;
            margin: 10px 0px;
            display: none;
        }
    </style>

</head>

<body>
    <div class="percentageWrapper">
        <input type="button" value="save" class="saveBTN" />
        <input type="button" value="reset" class="resetBTN" />
    </div>

    <div class="wrapper">
        <div class="questionWrapper">
            <span contenteditable>Can you identify market structure</span>
            <ul>
                <li class="green">Price is moving up making higher highs and higher lows</li>
                <li class="red">Price is moving down making lower highs and lower lows</li>
            </ul>
        </div>

        <div class="questionWrapper">
            <span contenteditable>Can you identify a price channel</span>
            <ul>
                <li class="green">Price is clearly contained in a channel going up</li>
                <li class="red">Price is clearly contained in a channel going down</li>
            </ul>
        </div>

        <div class="questionWrapper">
            <span contenteditable>Can you identify market momentum</span>
            <ul>
                <li class="green">There are more green candles than red</li>
                <li class="red">There are more red candles than green</li>
            </ul>
        </div>

        <div class="questionWrapper">
            <span contenteditable>Can you identify market strength</span>
            <ul>
                <li class="green">Green candles are significantly larger than red</li>
                <li class="red">Red candles are significantly larger than green</li>
            </ul>
        </div>

        <div class="questionWrapper">
            <span contenteditable>Can you identify market volume</span>
            <ul>
                <li class="green">Prices moves a greater distance going up with increasing volume</li>
                <li class="red">Prices moves a greater distance going down with increasing volume</li>
            </ul>
        </div>

        <div class="questionWrapper">
            <span contenteditable>Can you identify 200 SMA</span>
            <ul>
                <li class="green">Price is greater than 200SMA</li>
                <li class="red">Price is lesser than 200SMA</li>
            </ul>
        </div>

        <div class="questionWrapper">
            <span contenteditable>Can you identify 200 SMA direction</span>
            <ul>
                <li class="green">200SMA is sloping up more than down</li>
                <li class="red">200SMA is sloping down more than up</li>
            </ul>
        </div>

        <div class="questionWrapper">
            <span contenteditable>Price has plotted a candlestick price action pattern that supports the trade
                direction</span>
            <ul>
                <li class="green">bullish engulfing</li>
                <li class="red">bearish engulfing</li>
            </ul>
        </div>

        <div class="questionWrapper">
            <span contenteditable>Can you identify a chart pattern</span>
            <ul>
                <li class="red">double top</li>
                <li class="green">double bottom</li>
                <li class="red">head and shoulders</li>
                <li class="green">inverted head and shoulders</li>
            </ul>
        </div>

        <div class="questionWrapper">
            <span contenteditable>Is price at a significant zone</span>
            <ul>
                <li class="green">Price bounced of support</li>
                <li class="red">Price broke support and retested</li>
                <li class="red">Price bounced of resistance</li>
                <li class="green">Price broke resistance and retested</li>
            </ul>
        </div>

        <div class="questionWrapper">
            <span contenteditable>Can you identify a divergence</span>
            <ul>
                <li class="green">hidden bullish</li>
                <li class="red">hidden bearish</li>
                <li class="green">regular bullish</li>
                <li class="red">regular bearish</li>
            </ul>
        </div>

        <div class="questionWrapper">
            <span contenteditable>Higher Trend supports the trade direction</span>
            <ul>
                <li class="green">Bullish</li>
                <li class="red">Bearish</li>
            </ul>
        </div>
    </div>

    <script>
        var totalQuestions = 0;

        function resetQuestions() {
            localStorage.clear("checkList");
            location.reload();
        }

        function saveQuestions() {
            const questions = document.querySelectorAll(".questionWrapper");
            var questionArr = [];

            questions.forEach((question) => {
                questionArr.push({ "question": question.querySelector("span").innerText, "answers": [...question.querySelectorAll("li")].map(m => ({ "text": m.innerText, "color": m.classList[0] })) });
            });
            localStorage.setItem("checkList", JSON.stringify(questionArr));
        }

        function getQuestions() {
            questions = JSON.parse(localStorage.getItem("checkList") || "[]");
            if (questions.length) {
                const wrapper = document.querySelector(".wrapper");
                wrapper.innerHTML = "";

                questions.forEach((question) => {
                    const myQuestionWrapper = document.createElement("div");
                    myQuestionWrapper.classList.add('questionWrapper');

                    const myQuestion = document.createElement("span");
                    myQuestion.setAttribute('contenteditable', '');
                    const myQuestionText = document.createTextNode(question.question);
                    myQuestion.appendChild(myQuestionText);
                    myQuestionWrapper.appendChild(myQuestion);

                    const myAnswer = document.createElement("ul");
                    question.answers.forEach((answer) => {
                        const myAnswerLi = document.createElement("li");
                        myAnswerLi.classList.add(answer.color);

                        const myAnswerLiText = document.createTextNode(answer.text);
                        myAnswerLi.appendChild(myAnswerLiText);
                        myAnswer.appendChild(myAnswerLi);
                    });
                    myQuestionWrapper.appendChild(myAnswer);

                    wrapper.appendChild(myQuestionWrapper);
                });
            }
        }

        function selection(e) {
            if (e.classList.contains('selected')) {
                e.classList.remove('selected');
            } else {
                const liSiblings = e.parentNode.children;
                [...liSiblings].map(el => el.classList.remove('selected'));

                e.classList.toggle('selected');
            }

            greenCount = document.querySelectorAll('.green.selected').length;
            redCount = document.querySelectorAll('.red.selected').length;

            greenpercent = 360 - (360 * (greenCount / totalQuestions));
            redpercent = 360 * (redCount / totalQuestions);

            document.querySelector(".percentageWrapper").style.background = "radial-gradient(white 50%, transparent 51%),conic-gradient(red 0deg " + redpercent + "deg,#bababa " + redpercent + "deg " + greenpercent + "deg,#4caf50 " + greenpercent + "deg 360deg)";
        }

        window.onload = function () {
            getQuestions();

            totalQuestions = document.querySelectorAll(".questionWrapper").length;

            const saveBTN = document.querySelector(".saveBTN");
            saveBTN.addEventListener("click", saveQuestions);

            const resetBTN = document.querySelector(".resetBTN");
            resetBTN.addEventListener("click", resetQuestions);

            const options = document.querySelectorAll("li");
            options.forEach((answer) => { answer.addEventListener('click', () => selection(answer)); });
        };

    </script>
</body>

</html>
